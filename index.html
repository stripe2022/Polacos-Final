<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" /> <!--?v=2 -->
  <title>Polacos Gym</title>
</head>
<body>
  <div class="container">
    <img src="polacos-gym-banner.jpg" alt="Banner" class="banner" />

    <div id="main-buttons">
      <button onclick="mostrarSeccion('add-member')">‚ûï A√±adir Miembro</button>
      <button onclick="mostrarSeccion('search')">üîç B√∫squeda de Cliente</button>
      <button onclick="mostrarSeccion('deudores')">‚ö†Ô∏è Deudores</button>
      <button onclick="mostrarSeccion('reporte')"> üìÖReporte Mensual</button>
      <!-- Bot√≥n principal -->
<div id="backup-container">
  <button onclick="toggleBackupMenu()">üíæ Copia de Seguridad</button>

  <!-- Submen√∫ oculto -->
  <div id="backup-menu" class="hidden">
    <input type="file" id="input-backup" accept="application/json" style="display:none" />
    <button onclick="exportarBackup()">üì§ Exportar Backup</button>
    <button onclick="document.getElementById('input-backup').click()">üì• Importar Backup</button>
  </div>
</div>

    </div>

    <!-- A√ëADIR MIEMBRO -->
    <section id="add-member" class="hidden">
      <h2>A√±adir Miembro</h2>
      <form id="member-form">

        <!-- DATOS B√ÅSICOS -->
        <div class="input-row">
          <div class="floating-group">
            <input type="text" id="nombre" placeholder=" " required />
            <label for="nombre">Nombre</label>
          </div>
          <div class="floating-group">
            <input type="text" id="apellido" placeholder=" " required />
            <label for="apellido">Apellido</label>
          </div>
        </div>

        <div class="input-row">
          <div class="floating-group">
            <input type="date" id="fecha" placeholder=" " />
            <label for="fecha">Fecha</label>
          </div>
          <div class="floating-group">
            <input type="tel" id="telefono" placeholder=" " required />
            <label for="telefono">Tel√©fono</label>
          </div>
        </div>

        <!-- INFORMACI√ìN PERSONAL -->
        <div class="form-section">
          <h3>Informaci√≥n Personal</h3>
          <div class="input-row">
            <div class="floating-group">
              <input type="number" id="ci" placeholder=" " required />
              <label for="ci">Carnet de Identidad</label>
            </div>
            <div class="floating-group">
              <input type="number" id="edad" placeholder=" " min="1" required />
              <label for="edad">Edad</label>
            </div>
          </div>

          <div class="input-row">
            <div class="floating-group">
              <select id="sexo" required>
                <option value="" disabled selected></option>
                <option value="Femenino">Femenino</option>
                <option value="Masculino">Masculino</option>
              </select>
              <label for="sexo">Sexo</label>
            </div>
            <div class="floating-group">
              <select id="tipo-atencion" required>
                <option value="" disabled selected></option>
                <option value="Dirigida">Dirigida</option>
                <option value="Personal">Personal</option>
              </select>
              <label for="tipo-atencion">Tipo de Atenci√≥n</label>
            </div>
          </div>
        </div>

        <!-- COMPOSICI√ìN CORPORAL -->
        <div class="form-section">
          <h3>Composici√≥n Corporal</h3>
          <div class="input-row">
            <div class="floating-group">
              <input type="number" id="peso" placeholder=" " min="1" required />
              <label for="peso">Peso (kg)</label>
            </div>
            <div id="libras" class="peso-libras"></div>
          </div>
          <div class="input-row">
            <div class="floating-group">
              <input type="number" id="talla" placeholder=" " min="1" required />
              <label for="talla">Talla (cm)</label>
            </div>
            <div class="floating-group">
              <input type="number" id="grasa" placeholder=" " min="0"  />
              <label for="grasa">% Grasa Corporal</label>
            </div>
          </div>
          <div class="imc">IMC: <span id="imc-valor">--</span></div>
        </div>

        <!-- ANTROPOMETR√çA -->
        <div class="form-section">
          <h3>Evaluaci√≥n Antropom√©trica</h3>
          <div id="antropometria-femenino" class="hidden">
            <div class="input-row">
              <div class="floating-group">
                <input type="number" id="biceps-f" placeholder=" " min="0" />
                <label for="biceps-f">B√≠ceps</label>
              </div>
              <div class="floating-group">
                <input type="number" id="abdominal-f" placeholder=" " min="0" />
                <label for="abdominal-f">Abdominal</label>
              </div>
            </div>
            <div class="input-row">
              <div class="floating-group">
                <input type="number" id="gluteo" placeholder=" " min="0" />
                <label for="gluteo">Gl√∫teo</label>
              </div>
              <div class="floating-group">
                <input type="number" id="muslos-f" placeholder=" " min="0" />
                <label for="muslos-f">Muslos</label>
              </div>
            </div>
          </div>
          <div id="antropometria-masculino" class="hidden">
            <div class="input-row">
              <div class="floating-group">
                <input type="number" id="torax-interno" placeholder=" " min="0" />
                <label for="torax-interno">T√≥rax Interno</label>
              </div>
              <div class="floating-group">
                <input type="number" id="torax-externo" placeholder=" " min="0" />
                <label for="torax-externo">T√≥rax Externo</label>
              </div>
            </div>
            <div class="input-row">
              <div class="floating-group">
                <input type="number" id="gastronemio" placeholder=" " min="0" />
                <label for="gastronemio">Gastronemio</label>
              </div>
              <div class="floating-group">
                <input type="number" id="biceps-m" placeholder=" " min="0" />
                <label for="biceps-m">B√≠ceps</label>
              </div>
            </div>
            <div class="input-row">
              <div class="floating-group">
                <input type="number" id="abdominal-m" placeholder=" " min="0" />
                <label for="abdominal-m">Abdominal</label>
              </div>
              <div class="floating-group">
                <input type="number" id="muslos-m" placeholder=" " min="0" />
                <label for="muslos-m">Muslos</label>
              </div>
            </div>
          </div>
        </div>

        <!-- COMENTARIOS Y OBSERVACIONES -->
        <div class="form-section">
          <h3>Comentarios</h3>
          <textarea id="comentarios" placeholder="Comentarios generales..."></textarea>
        </div>
        <div class="form-section">
          <h3>Observaciones Patol√≥gicas</h3>
          <textarea id="observaciones" placeholder="Observaciones Patol√≥gicas..."></textarea>
        </div>

        <!-- FOTO Y BOTONES -->
        <input type="file" id="foto" accept="image/*" capture="environment" style="display: none;" />
        <button type="button" id="btn-foto">A√±adir Foto</button>
        <div id="preview"></div>
        <button type="submit" class="guardar">Guardar</button>
        <button type="button" class="cancelar" onclick="volverInicio()">Cancelar</button>
      </form>
    </section>

    <!-- B√öSQUEDA -->
    <section id="search" class="hidden">
      <h2>B√∫squeda de Cliente</h2>
      <input type="text" id="search-input" placeholder="Nombre o tel√©fono..." oninput="buscarClientes()" />
      <div id="resultados"></div>
      <button class="cancelar" onclick="volverInicio()">Cancelar</button>
    </section>

    <!-- DEUDORES -->
    <section id="deudores" class="hidden">
      <h2>Clientes Deudores</h2>
      <div id="lista-deudores"></div>
      <button class="cancelar" onclick="volverInicio()">Cancelar</button>
    </section>
    <!-- REPORTE MENSUAL -->
<section id="reporte" class="hidden">
  <h2>Reporte Mensual</h2>

  <div class="form-section">
    <label for="mes-reporte" class="etiqueta-mes">Seleccionar mes:</label>
    <input type="month" id="mes-reporte" />
  </div>

  <div class="form-section">
    <div class="kpi-box kpi-white">Matr√≠cula Total: <strong id="total-clientes">--</strong></div>
    <div class="kpi-box kpi-green">Miembros Activos: <strong id="activos">--</strong></div>
    <div class="kpi-box kpi-red">Miembros Inactivos: <strong id="inactivos">--</strong></div>
    <div class="kpi-box kpi-soft-red">Miembros Deudores: <strong id="deudores-count">--</strong></div>
  </div>

  <div class="separador"></div>

  <div class="form-section">
    <div class="kpi-box">Nuevos registros: <strong id="nuevos">--</strong></div>
    <div class="kpi-box">Membres√≠as renovadas: <strong id="renovados">--</strong></div>
    <div class="kpi-box">Tasa de retenci√≥n: <strong id="retencion">--</strong></div>
  </div>

  <div class="separador"></div>

  <div class="form-section">
    <h3>Distribuci√≥n por Sexo</h3>
    <div class="kpi-box">Masculino: <strong id="sexo-m">--</strong></div>
    <div class="kpi-box">Femenino: <strong id="sexo-f">--</strong></div>
  </div>

  <div class="form-section">
    <h3>Distribuci√≥n por Edad</h3>
    <div class="kpi-box">Menores de 18: <strong id="edad-1">--</strong></div>
    <div class="kpi-box">18‚Äì30: <strong id="edad-2">--</strong></div>
    <div class="kpi-box">31‚Äì45: <strong id="edad-3">--</strong></div>
    <div class="kpi-box">46‚Äì60: <strong id="edad-4">--</strong></div>
    <div class="kpi-box">60+: <strong id="edad-5">--</strong></div>
  </div>

  <button class="cancelar" onclick="volverInicio()">Volver</button>
</section>
  </div>
  

  <!-- MODAL DE IMAGEN -->
  <div id="img-modal" class="modal hidden">
    <span class="close-modal" onclick="cerrarModal()">√ó</span>
    <img id="modal-img" src="" alt="Foto Ampliada">
  </div>

  <!-- SCRIPTS -->
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/Polacos-Final/sw.js')
      .then(reg => console.log('SW registrado', reg))
      .catch(err => console.error('Error registrando SW:', err));
  }
</script>

  <script type="module" src="/Polacos-Final/db.js"></script>
  <script src="app.js"></script>
 
</body>
  </html>
